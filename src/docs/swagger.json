{
  "swagger": "2.0",
  "info": {
    "description": "AURORAL node interface - developed by bAvenir. The REST API is divided in two main groups; the API (Calls that use the Gateway to contact the VICINITY platform) and the ADMIN (calls oriented to monitor and make use to the agent resources)",
    "version": "1.0.0",
    "title": "Auroral agent",
    "license": {
      "name": "Apache 2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
    }
  },
  "host": "localhost:81",
  "basePath": "",
  "externalDocs": {
    "description": "Find out more about AURORAL",
    "url": "https://www.auroral.eu"
  },
  "tags": [
    {
      "name": "auth",
      "description": "API - Manual login of local infrastructure into VICINITY"
    },
    {
      "name": "registry",
      "description": "API - Manual registration of new devices or services into VICINITY"
    },
    {
      "name": "discovery",
      "description": "API - Discover the remote objects visible by your object"
    },
    {
      "name": "consumption",
      "description": "API - Resource consumption calls, request properties or publish events among others"
    },
    {
      "name": "admin",
      "description": "ADMIN - Monitor and manage the registrations and interactions that your adapter is using"
    },
    {
      "name": "import/export",
      "description": "ADMIN - Load/Save From/To file the information persisted by your adapter in memory"
    },
    {
      "name": "healthcheck",
      "description": "ADMIN - Test connection status of the adapter components (Server, Gateway and Storage)"
    }
  ],
  "schemes": [
    "http"
  ],
  "paths": {
    "/admin/healthcheck": {
      "get": {
        "description": "See status of the adapter main components",
        "tags": [ "healthcheck"],
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponseObject"
            }
          }
        }
      }
    },
    "/admin/exports": {
      "get": {
        "description": "Save registrations and interactions to file. BackUp option",
        "tags": [ "import/export"],
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponse"
            }
          }
        }
      }
    },
    "/admin/imports": {
      "get": {
        "description": "Get into adapter registrations and interactions from file. Restore option",
        "tags": [ "import/export"],
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponse"
            }
          }
        }
      }
    },
    "/admin/registrations": {
      "get": {
        "description": "Retrieve all the IDs of objects registered with your adapter and stored locally.",
        "tags": ["admin"],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponseArray"
            }
          }
        }
      }
    },
      "/admin/registrations/{id}": {
      "get": {
        "description": "Obtain the information of a concrete registered item by providing the ID as parameter",
        "tags": ["admin"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "description": "Object id - OID",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponseObject"
            }
          }
        }
      }
    },
    "/admin/registrations/td/{id}": {
      "get": {
        "description": "Obtain the TD concrete registered item by providing the ID as parameter",
        "tags": ["admin"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "description": "Object id - OID",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponseObject"
            }
          }
        }
      }
    },
    "/admin/configuration": {
      "get": {
        "description": "Configuration status of the adapter",
        "tags": ["admin"],
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponseObject"
            }
          }
        }
      }
    },
    "/api/properties/{id}/{oid}/{pid}": {
      "get": {
        "description": "Request to get a remote property",
        "tags": [ "consumption"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          },
          {
            "in": "path",
            "name": "oid",
            "required": true,
            "description": "REMOTE Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          },
          {
            "in": "path",
            "name": "pid",
            "required": true,
            "description": "Property of the remote object - PID",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponseObject"
            }
          }
        }
      },
      "put": {
        "description":"Request the update of a remote property",
        "tags": [ "consumption"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          },
          {
            "in": "path",
            "name": "oid",
            "required": true,
            "description": "REMOTE Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          },
          {
            "in": "path",
            "name": "pid",
            "required": true,
            "description": "Property of the remote object - PID",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponseObject"
            }
          }
        }
      }
    },
    "/api/events/remote/{id}/{oid}/{eid}": {
      "get": {
        "description": "Get status of a remote event channel",
        "tags": [ "consumption"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          },
          {
            "in": "path",
            "name": "oid",
            "required": true,
            "description": "REMOTE Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          },
          {
            "in": "path",
            "name": "eid",
            "required": true,
            "description": "Event of the remote object - EID",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponse"
            }
          }
        }
      },
      "post": {
        "description":"Subscribe to remote event channel",
        "tags": [ "consumption"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          },
          {
            "in": "path",
            "name": "oid",
            "required": true,
            "description": "REMOTE Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          },
          {
            "in": "path",
            "name": "eid",
            "required": true,
            "description": "Event of the remote object - EID",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponse"
            }
          }
        }
      },
      "delete": {
        "description":"Unsubscribe to remote event channel",
        "tags": [ "consumption"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          },
          {
            "in": "path",
            "name": "oid",
            "required": true,
            "description": "REMOTE Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          },
          {
            "in": "path",
            "name": "eid",
            "required": true,
            "description": "Event of the remote object - EID",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponse"
            }
          }
        }
      }
    },
    "/api/events/local/{id}/{eid}": {
      "post": {
        "description": "Create my event channel",
        "tags": [ "consumption"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          },
          {
            "in": "path",
            "name": "eid",
            "required": true,
            "description": "ID of my event - EID",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponse"
            }
          }
        }
      },
      "put": {
        "description":"Put a message in my event channel",
        "tags": [ "consumption"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          },
          {
            "in": "path",
            "name": "eid",
            "required": true,
            "description": "ID of my event - EID",
            "type": "string"
          },
          {
            "in": "body",
            "name": "body",
            "required": true,
            "description": "Body of the message",
            "type": "object"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponse"
            }
          }
        }
      },
      "delete": {
        "description":"Delete my event channel",
        "tags": ["consumption"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          },
          {
            "in": "path",
            "name": "eid",
            "required": true,
            "description": "ID of my event - EID",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponse"
            }
          }
        }
      }
    },
    "/api/events/subscribe": {
      "get": {
        "description": "Subscribe to all events existing in the file mapper.json. Agent will listen and collect messages in those channels.",
        "tags": ["consumption"],
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponse"
            }
          }
        }
      },
      "delete": {
        "description":"Unsubscribe to all events existing in the file mapper.json. Agent will stop listening.",
        "tags": ["consumption"],
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponse"
            }
          }
        }
      }
    },
    "/api/login/{id}": {
      "get": {
        "description": "Login your gateway instance or any object registered with it (Providing its id)",
        "tags": [ "auth"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "description": "Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponse"
            }
          }
        }
      }
    },
    "/api/logout/{id}": {
      "get": {
        "description": "Logout your gateway instance or any object registered with it (Providing its id)",
        "tags": [ "auth"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "description": "Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponse"
            }
          }
        }
      }
    },
    "/api/registration": {
      "post": {
        "description":"Register an object in the VICINITY platform",
        "tags": [ "registry"],
        "parameters": [            
          {
          "in": "body",
          "name": "body",
          "description": "Registration info",
          "type": "object",
          "required": true,
          "schema": {
            "$ref": "#/definitions/bodyRegistry"
          }
        }
      ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponseObject"
            }
          }
        }
      },
      "get": {
        "description": "See what objects has your gateway registered in the platform",
        "tags": [ "registry"],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponseObject"
            }
          }
        }
      }
    },
    "/api/registration/remove": {
      "post": {
        "description":"UnRegister an object from the VICINITY platform",
        "tags": [ "registry"],
        "parameters": [            
          {
          "in": "body",
          "name": "body",
          "description": "List of OIDs that have to be removed from the platform",
          "type": "object",
          "required": true,
          "schema": {
            "$ref": "#/definitions/bodyUnRegistry"
          }
        }
      ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponse"
            }
          }
        }
      }
    },
    "/api/discovery": {
      "get": {
        "description": "See what remote objects can you reach with your Gateway. You will see other gateways of your organisation or partnered organisations",
        "tags": [ "discovery"],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponseArray"
            }
          }
        }
      }
    },
    "/api/discovery/{id}": {
      "get": {
        "description": "See what remote objects can you reach which each OID. To see objects of other organisations you need to agree on a contract for exchanging data. Get what your gateway can see by not providing oid parameter.",
        "tags": [ "discovery"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "description": "Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponseArray"
            }
          }
        }
      },
      "post": {
        "description": "Remote discovery. Get thing descriptions of remote infrastructures that your gateway can see",
        "tags": [ "discovery"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "description": "Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          },
          {
            "in": "body",
            "name": "body",
            "description": "SPARQL query: Filter out specific content that you wish to see. I.E: Get me only thermometers",
            "type": "object",
            "schema": {
              "$ref": "#/definitions/SparqlResponseObject"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponseObject"
            }
          }
        }
      }
    },
    "/api/discovery/{id}/{originId}": {
      "post": {
        "description": "Remote discovery. Get thing descriptions of remote objects that some of your objects can see. Set the id of the object with the OID parameter and set the object initiating the request with originID.",
        "tags": [ "discovery"],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "description": "Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          },
          {
            "in": "path",
            "name": "originId",
            "description": "Object id - OID",
            "type": "string",
            "default": "0000-0000-0000"
          },
          {
            "in": "body",
            "name": "body",
            "description": "SPARQL query: Filter out specific content that you wish to see. I.E: Get me only thermometers",
            "type": "object",
            "required": false,
            "schema": {
              "$ref": "#/definitions/SparqlResponseObject"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/ApiResponseObject"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "ApiResponse": {
      "type":"object",
      "properties": {
        "error": {
          "type": "boolean",
          "default": false
        },
        "message": {
          "type": "string"
        }
      }
    },
    "ApiResponseArray": {
      "type":"object",
      "properties": {
        "error": {
          "type": "boolean",
          "default": false
        },
        "message": {
          "type":"array",
          "description": "Array of oid's.",
          "items": {
              "type": "string"
            }
        }
      }
    },
    "ApiResponseObject": {
      "type":"object",
      "properties": {
        "error": {
          "type": "boolean",
          "default": false
        },
        "message": {
          "type": "object"
        }
      }
    },
    "bodyRegistry": {
      "properties": {
        "name" : {
          "description": "Human readable name for the object",
          "type": "string",
          "required": true,
          "default": "MySmartSensor"
        },
        "type" : {
          "description": "VICINITY type to assign for the object",
          "type": "string",
          "required": true,
          "default": "Device"
        },
        "adapterId" : {
          "type": "string",
          "description": "Id of the object in your infrastructure",
          "required": true,
          "default": "1234"
        },
        "properties": {
          "type":"array",
          "description": "Array of pid's. You can use only those you previously registered in the adapter",
          "items": {
              "type": "string"
            }
          },
        "events": {
          "type":"array",
          "description": "Array of eid's. You can use only those you previously registered in the adapter",
          "items": {
              "type": "string"
            }
          },
        "actions": {
          "type":"array",
          "description": "Array of aid's. You can use only those you previously registered in the adapter",
          "items": {
              "type": "string"
            }
        },
        "version" : {
          "type": "string",
          "description": "Version of the registered device if applicable"
        },
        "description" : {
          "type": "string",
          "description": "Additional info"
        }
      }
    },
    "bodyUnRegistry": {
      "type":"object",
      "properties": {
        "agid" : {
          "description": "ID of the agent",
          "type": "string",
          "required": true,
          "default": "000-0000-000"
        },
        "oids": {
          "type":"array",
          "description": "OIDs of those objects you would like to unregister",
          "items": {
              "type": "string"
          }
        }
      }
    },
    "SparqlResponseObject": {
      "type":"object"
    }
  }
}